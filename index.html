<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ูุนุจุฉ ุงูููุงูู ุงูุฃุฑุจุนุฉ - ูุญูู P2P</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
 <!-- ููุณ ุงูู HTML ุงูุณุงุจู ูุน ุฅุถุงูุฉ ูุฐุง ุงูุนูุตุฑ ููุชุดุบูู ุงููุญูู -->
    <div id="local-mode-badge" style="position: fixed; bottom: 10px; left: 10px; background: #ff6b6b; color: white; padding: 5px 10px; border-radius: 20px; font-size: 12px; z-index: 9999;">
        โก ูุถุน ุงูุชุฌุฑุจุฉ ุงููุญููุฉ
    </div>
    
    <!-- ุฌููุน ุงูุนูุงุตุฑ ุงูุฃุฎุฑู ููุง ูู -->
    <!-- ... -->
    
    <!-- ุชุบููุฑ ุชุฑุชูุจ ุชุญููู ุงูููุชุจุงุช -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <!-- ุงุณุชุฎุฏุงู ูุณุฎุฉ ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู ูู PeerJS -->
    <script src="https://cdn.jsdelivr.net/npm/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    

    <div id="splash-screen" class="screen">
        <div class="splash-content">
            <h1>๐ ุงูููุงูู ุงูุฃุฑุจุนุฉ ๐</h1>
            <p>ุงูุนุจ ูุน ุฃุตุฏูุงุฆู ูู ููุณ ุงูุบุฑูุฉ</p>
            <div class="loading-spinner"></div>
            <p class="small">ุฌุงุฑู ุชุญููู ุงููุนุจุฉ...</p>
        </div>
    </div>

    <div id="main-menu" class="screen hidden">
        <div class="menu-container">
            <h1>๐ ุงูููุงูู ุงูุฃุฑุจุนุฉ ๐</h1>
            <div class="menu-buttons">
                <button id="create-room-btn" class="primary-btn">โ ุฅูุดุงุก ุบุฑูุฉ ุฌุฏูุฏุฉ</button>
                <button id="join-room-btn" class="secondary-btn">๐ ุงูุถู ุฅูู ุบุฑูุฉ</button>
                <button id="single-player-btn" class="outline-btn">๐ฎ ุงูุนุจ ุถุฏ ุงูููุจููุชุฑ</button>
            </div>
            <div class="instructions">
                <h3>ููู ุชูุนุจุ</h3>
                <p>ุงุฌูุน 4 ุจุทุงูุงุช ูู ููุณ ุงูููุน ูุจู ุงูุขุฎุฑูู!</p>
                <p>ุนูุฏ ุงูุชูุงู ูุฌููุนุชูุ ุงุถุบุท ุนูู ุฒุฑ "ุชู" ุจุณุฑุนุฉ</p>
            </div>
        </div>
    </div>

    <div id="lobby-screen" class="screen hidden">
        <div class="lobby-container">
            <h2>ุบุฑูุฉ ุงูุงูุชุธุงุฑ</h2>
            <div class="room-info">
                <p>๐ ุฑูุฒ ุงูุบุฑูุฉ: <span id="room-code">ABCD</span></p>
                <p>ุงููุงุนุจูู: <span id="player-count">1/4</span></p>
                <div id="qr-code-container">
                    <canvas id="qr-code"></canvas>
                    <p class="small">ุงูุณุญ ููุงูุถูุงู ุงูุณุฑูุน</p>
                </div>
            </div>
            <div class="players-list" id="players-list">
                <div class="player-item host">๐ ุฃูุช (ุงููุถูู)</div>
                <div class="player-item empty">โฌ ูู ุงูุชุธุงุฑ ูุงุนุจูู...</div>
            </div>
            <div class="lobby-controls">
                <button id="start-game-btn" class="primary-btn" disabled>ุงุจุฏุฃ ุงููุนุจุฉ (2 ูุงุนุจูู ุนูู ุงูุฃูู)</button>
                <button id="back-from-lobby-btn" class="text-btn">โฉ๏ธ ุฑุฌูุน</button>
            </div>
            <div class="invite-link">
                <p>ุฃู ุฃุฑุณู ูุฐุง ุงูุฑุงุจุท:</p>
                <div class="link-copy">
                    <input type="text" id="invite-link" readonly>
                    <button id="copy-link-btn">๐ ูุณุฎ</button>
                </div>
            </div>
        </div>
    </div>

    <div id="game-screen" class="screen hidden">
        <div class="game-header">
            <div class="timer" id="game-timer">00:00</div>
            <div class="category" id="game-category">ุงูููุงูู</div>
            <button id="leave-game-btn" class="small-btn">๐ช ุฎุฑูุฌ</button>
        </div>
        
        <div class="players-status" id="players-status">
            <!-- ุณูุชู ุชุนุจุฆุชูุง ุฏููุงููููุงู -->
        </div>
        
        <div class="my-hand" id="my-hand">
            <h3>ุจุทุงูุงุชู <span id="cards-count">0/4</span></h3>
            <div class="cards-container" id="cards-container">
                <!-- ุงูุจุทุงูุงุช ุณุชุธูุฑ ููุง -->
            </div>
        </div>
        
        <div class="game-controls">
            <button id="done-button" class="win-btn" disabled>๐ฏ ุชู! (4 ูู ููุณ ุงูููุน)</button>
            <div class="action-log" id="action-log">
                <p>โณ ูู ุงูุชุธุงุฑ ุฏูุฑู...</p>
            </div>
        </div>
    </div>

    <div id="join-screen" class="screen hidden">
        <div class="join-container">
            <h2>ุงูุถู ุฅูู ุบุฑูุฉ</h2>
            <div class="qr-scanner">
                <p>ุงูุณุญ ุฑูุฒ QR ุงูุฎุงุต ุจุงููุถูู</p>
                <div id="scanner-preview">
                    <video id="qr-video"></video>
                    <canvas id="qr-canvas" hidden></canvas>
                </div>
                <button id="scan-qr-btn" class="secondary-btn">๐ท ูุชุญ ุงููุงููุฑุง</button>
            </div>
            <div class="or-divider">ุฃู</div>
            <div class="manual-join">
                <input type="text" id="room-code-input" placeholder="ุฃุฏุฎู ุฑูุฒ ุงูุบุฑูุฉ" maxlength="4">
                <button id="join-with-code-btn" class="primary-btn">ุงูุถูุงู</button>
            </div>
            <button id="back-to-menu-btn" class="text-btn">โฉ๏ธ ุฑุฌูุน</button>
        </div>
    </div>

    <div id="single-player-screen" class="screen hidden">
        <div class="single-player-container">
            <h2>ุงูุนุจ ุถุฏ ุงูููุจููุชุฑ</h2>
            <div class="difficulty-selector">
                <button data-diff="easy" class="diff-btn selected">๐ฑ ุณูู</button>
                <button data-diff="medium" class="diff-btn">โก ูุชูุณุท</button>
                <button data-diff="hard" class="diff-btn">๐ฅ ุตุนุจ</button>
            </div>
            <button id="start-single-player" class="primary-btn">ุงุจุฏุฃ ุงููุนุจุฉ</button>
            <button id="back-from-single" class="text-btn">โฉ๏ธ ุฑุฌูุน</button>
        </div>
    </div>

    <div id="result-modal" class="modal hidden">
        <div class="modal-content">
            <h2 id="result-title">๐ ูุงุฒ ุฃุญูุฏ!</h2>
            <p id="result-message">ุชููู ูู ุฌูุน 4 ุชูุงุญุงุช ุฃููุงู</p>
            <button id="next-round-btn" class="primary-btn">ุงูุฌููุฉ ุงูุชุงููุฉ</button>
            <button id="end-game-btn" class="text-btn">ุฅููุงุก ุงููุนุจุฉ</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="game.js"></script>
    <!-- ุฅุถุงูุฉ ููุชุจุงุช ุฅุถุงููุฉ -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <!-- ุฅุถุงูุฉ ููุชุจุฉ jsQR ููุณุญ QR (ุงุฎุชูุงุฑู) -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    
     <!-- ูููุงุช ุงููุนุจุฉ -->
    <script src="config.js"></script>
    <script src="p2p-fallback.js"></script>
    <script src="game-fixed.js"></script>
</body>
</html>